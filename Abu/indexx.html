<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voucher Generator</title>
    <style>
      body {
        margin: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-family: "Franklin Gothic Medium", "Arial Narrow", Arial, sans-serif;
      }

      .form-container {
        width: 100%;
        min-width: 500px;
        max-width: 900px;
        box-shadow: 2px 2px 20px rgba(128, 128, 128, 0.363);
        margin-bottom: 20px;
        padding: 5%;
        border-radius: 20px;
      }

      .form-group {
        margin-bottom: 15px;
        width: 100%;
        display: flex;
        flex-direction: column;
      }

      .form-group label {
        display: block;
        font-weight: bold;
      }

      .form-group input {
        width: calc(100% - 20px);
        padding: 10px;
        margin-top: 5px;
      }

      .form-group button, button {
        width: 100%;
        padding: 10px;
        background-color: rgb(106, 83, 68);
        color: white;
        border: none;
        cursor: pointer;
      }

      .form-group button:hover {
        background-color: rgb(86, 63, 48);
      }

      .voucher {
        width: 100%;
        min-width: 500px;
        max-width: 900px;
        box-shadow: 2px 2px 20px rgba(128, 128, 128, 0.363);
        /* display: none; */
      }

      header {
        width: 100%;
        height: 100px;
        /* background-image: url('kaabah2.jpg'); */
        background-size: contain;
        background-position: right;
        background-repeat: no-repeat;
      }

      .cover {
        width: 100%;
        height: 100%;
        /* background: linear-gradient(90deg, rgb(106, 83, 68) 50%, rgba(0, 0, 0, 0)); */
      }

      .title {
        width: 100%;
        color: rgb(106, 83, 68);
        text-align: center;
        font-family: "Franklin Gothic Medium", "Arial Narrow", Arial, sans-serif;
        text-shadow: 1px 1px rgba(128, 128, 128, 0.555);
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        color: rgb(106, 83, 68);
      }

      .in {
        padding: 10px 70px;
      }

      .personalinfo {
        line-height: 0.5;
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        font-size: x-small;
      }

      .personalinfo span {
        font-weight: bolder;
      }

      .tripinfo h2 {
        font-size: small;
        width: 100%;
        text-align: center;
        margin-top: 30px;
      }

      table {
        width: 100%;
        text-align: center;
        font-size: xx-small;
        border-collapse: collapse;
        text-wrap: wrap;
        text-wrap-style: auto;
        text-wrap-mode: wrap;
      }

      thead {
        background-color: rgb(106, 83, 68);
        color: white;
      }

      th,
      td {
        margin: 0;
        padding: 10px;
        max-width: 100px;
      }

      .contact {
        font-size: small;
        display: flex;
        align-items: center;
        justify-content: center;
        line-height: 0.5;
        flex-wrap: wrap;
      }

      .contact h2 {
        width: 100%;
        text-align: center;
        font-size: x-small;
        margin-top: 40px;
      }

      .contact span {
        font-weight: bolder;
      }

      .contactpersons {
        font-size: xx-small;
      }

      .flightinfo,
      .hotelinfo {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: center;
      }

      .cover {
        display: flex;
        align-items: end;
        justify-content: flex-start;
      }

      .cover img:first-child {
        margin-right: 0;
      }
      .cover3 img {
        width: 50px;
        height: 50px;
        margin: 20px;
        border-radius: 5px;
      }

      .cover2 {
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(106, 83, 68, 0.6);
        width: 100%;
        height: 100%;
        border-radius: 20px;
      }

      .cover3 {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .head {
        width: 95%;
        height: 400px;
        background-image: url("curved5-small.jpg");
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center;
        position: relative;
        top: 0;
        z-index: -1;
        border-radius: 20px;
        margin: 2% auto;
      }

      div {
        background-color: #fff;
      }

      .form-container {
        margin-top: -10%;
      }

      button {
        border-radius: 200px;
        width: 50% !important;
        margin: 2px auto;
      }

      /* #voucherForm {
            display: flex;
        } */

        .voucher { display: none; }
    </style>
</head>
<body>

    <div class="form-container">
    <h1>Voucher Generator</h1>

    <div class="form-group">
        <label for="subAgent">Sub Agent</label>
        <input type="text" id="subAgent" required>
    </div>

    <div id="passengers"></div>
    <button onclick="addPassenger()">Add Passenger</button>

    <div id="flights"></div>
    <button onclick="addFlight()">Add Flight</button>

    <div id="hotels"></div>
    <button onclick="addHotel()">Add Hotel</button>

    <div id="contacts"></div>
    <button onclick="addContact()">Add Contact</button>
    </div>

    <button onclick="generateVoucher()">Generate Voucher</button>
    <button onclick="downloadVoucher()">Download Voucher</button>

    <div class="voucher">
        <div class="personalinfo">
            <div class="info">
                <span></span>
            </div>
        </div>

        <table class="passengerinfo">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Passport Number</th>
                    <th>Group Number</th>
                    <th>Visa Company</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <table class="flightinfo">
            <thead>
                <tr>
                    <th>City From</th>
                    <th>City To</th>
                    <th>Flight Date</th>
                    <th>ETD</th>
                    <th>ETA</th>
                    <th>Carrier</th>
                    <th>Flight No.</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <table class="hotelinfo">
            <thead>
                <tr>
                    <th>Hotel City</th>
                    <th>Hotel Name</th>
                    <th>Check-In Date</th>
                    <th>Check-Out Date</th>
                    <th>Room Type</th>
                    <th>Check-In Time</th>
                    <th>Nights</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <div class="contactpersons"></div>

        <div class="cover3"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>

    <script>
        function addPassenger() {
            const passengerHTML = `
                <div class="form-group">
                    <label for="passengername">Name</label>
                    <input type="text" class="passengername" required>
                </div>
                <div class="form-group">
                    <label for="passportnumber">Passport Number</label>
                    <input type="text" class="passportnumber" required>
                </div>
                <div class="form-group">
                    <label for="groupnumber">Group Number</label>
                    <input type="text" class="groupnumber" required>
                </div>
                <div class="form-group">
                    <label for="visacompany">Visa Company</label>
                    <input type="text" class="visacompany" required>
                </div>
            `;
            document.getElementById('passengers').insertAdjacentHTML('beforeend', passengerHTML);
        }

        function addFlight() {
            const flightHTML = `
                <div class="form-group">
                    <label for="cityFrom">City From:</label>
                    <input type="text" class="cityFrom" required>
                </div>
                <div class="form-group">
                    <label for="cityTo">City To:</label>
                    <input type="text" class="cityTo" required>
                </div>
                <div class="form-group">
                    <label for="flightDate">Flight Date:</label>
                    <input type="date" class="flightDate" required>
                </div>
                <div class="form-group">
                    <label for="etd">ETD:</label>
                    <input type="time" class="etd" required>
                </div>
                <div class="form-group">
                    <label for="eta">ETA:</label>
                    <input type="time" class="eta" required>
                </div>
                <div class="form-group">
                    <label for="carrier">Carrier:</label>
                    <input type="text" class="carrier" required>
                </div>
                <div class="form-group">
                    <label for="flightNo">Flight No.:</label>
                    <input type="text" class="flightNo" required>
                </div>
            `;
            document.getElementById('flights').insertAdjacentHTML('beforeend', flightHTML);
        }

        function addHotel() {
            const hotelHTML = `
                <div class="form-group">
                    <label for="hotelCity">Hotel City:</label>
                    <input type="text" class="hotelCity" required>
                </div>
                <div class="form-group">
                    <label for="hotelName">Hotel Name:</label>
                    <input type="text" class="hotelName" required>
                </div>
                <div class="form-group">
                    <label for="checkInDate">Check-In Date:</label>
                    <input type="date" class="checkInDate" required>
                </div>
                <div class="form-group">
                    <label for="checkOutDate">Check-Out Date:</label>
                    <input type="date" class="checkOutDate" required>
                </div>
                <div class="form-group">
                    <label for="roomType">Room Type:</label>
                    <input type="text" class="roomType" required>
                </div>
                <div class="form-group">
                    <label for="checkInTime">Check-In Time:</label>
                    <input type="time" class="checkInTime" required>
                </div>
                <div class="form-group">
                    <label for="nights">Nights:</label>
                    <input type="number" class="nights" required>
                </div>
            `;
            document.getElementById('hotels').insertAdjacentHTML('beforeend', hotelHTML);
        }

        function addContact() {
            const contactHTML = `
                <div class="form-group">
                    <label for="contactperson">Contact Person:</label>
                    <input type="text" class="contactperson" required>
                </div>
            `;
            document.getElementById('contacts').insertAdjacentHTML('beforeend', contactHTML);
        }

        function generateVoucher() {
            const subAgent = document.getElementById('subAgent').value;
            const passengerNames = document.querySelectorAll('.passengername');
            const passportNumbers = document.querySelectorAll('.passportnumber');
            const groupNumbers = document.querySelectorAll('.groupnumber');
            const visaCompanies = document.querySelectorAll('.visacompany');

            const cityFroms = document.querySelectorAll('.cityFrom');
            const cityTos = document.querySelectorAll('.cityTo');
            const flightDates = document.querySelectorAll('.flightDate');
            const etds = document.querySelectorAll('.etd');
            const etas = document.querySelectorAll('.eta');
            const carriers = document.querySelectorAll('.carrier');
            const flightNos = document.querySelectorAll('.flightNo');

            const hotelCities = document.querySelectorAll('.hotelCity');
            const hotelNames = document.querySelectorAll('.hotelName');
            const checkInDates = document.querySelectorAll('.checkInDate');
            const checkOutDates = document.querySelectorAll('.checkOutDate');
            const roomTypes = document.querySelectorAll('.roomType');
            const checkInTimes = document.querySelectorAll('.checkInTime');
            const nights = document.querySelectorAll('.nights');

            const contactPersons = document.querySelectorAll('.contactperson');

            document.querySelector('.personalinfo .info span').textContent = subAgent;

            const passengerTableBody = document.querySelector('.passengerinfo tbody');
            if (passengerTableBody) {
                passengerTableBody.innerHTML = '';
                for (let i = 0; i < passengerNames.length; i++) {
                    const row = passengerTableBody.insertRow();
                    row.insertCell(0).textContent = passengerNames[i].value;
                    row.insertCell(1).textContent = passportNumbers[i].value;
                    row.insertCell(2).textContent = groupNumbers[i].value;
                    row.insertCell(3).textContent = visaCompanies[i].value;
                }
            } else {
                console.error('Passenger table body not found');
            }

            const flightTableBody = document.querySelector('.flightinfo tbody');
            if (flightTableBody) {
                flightTableBody.innerHTML = '';
                for (let i = 0; i < cityFroms.length; i++) {
                    const row = flightTableBody.insertRow();
                    row.insertCell(0).textContent = cityFroms[i].value;
                    row.insertCell(1).textContent = cityTos[i].value;
                    row.insertCell(2).textContent = flightDates[i].value;
                    row.insertCell(3).textContent = etds[i].value;
                    row.insertCell(4).textContent = etas[i].value;
                    row.insertCell(5).textContent = carriers[i].value;
                    row.insertCell(6).textContent = flightNos[i].value;
                }
            } else {
                console.error('Flight table body not found');
            }

            const hotelTableBody = document.querySelector('.hotelinfo tbody');
            if (hotelTableBody) {
                hotelTableBody.innerHTML = '';
                for (let i = 0; i < hotelCities.length; i++) {
                    const row = hotelTableBody.insertRow();
                    row.insertCell(0).textContent = hotelCities[i].value;
                    row.insertCell(1).textContent = hotelNames[i].value;
                    row.insertCell(2).textContent = checkInDates[i].value;
                    row.insertCell(3).textContent = checkOutDates[i].value;
                    row.insertCell(4).textContent = roomTypes[i].value;
                    row.insertCell(5).textContent = checkInTimes[i].value;
                    row.insertCell(6).textContent = nights[i].value;
                }
            } else {
                console.error('Hotel table body not found');
            }

            const contactList = document.querySelector('.contactpersons');
            if (contactList) {
                contactList.innerHTML = '';
                contactPersons.forEach(person => {
                    contactList.innerHTML += `<p>${person.value}</p>`;
                });
            } else {
                console.error('Contact list not found');
            }

            // Generate QR code
            const qrCodeContainer = document.querySelector('.cover3');
            if (qrCodeContainer) {
                qrCodeContainer.innerHTML = '';
                const qrCode = new QRCode(qrCodeContainer, {
                    text: "https://example.com",
                    width: 128,
                    height: 128,
                });
            } else {
                console.error('QR code container not found');
            }

            document.querySelector('.voucher').style.display = 'block';
        }

        function downloadVoucher() {
            const voucherElement = document.querySelector('.voucher');
            html2canvas(voucherElement).then(canvas => {
                const link = document.createElement('a');
                link.href = canvas.toDataURL('image/png');
                link.download = 'voucher.png';
                link.click();
            });
        }
    </script>
</body>
</html>
